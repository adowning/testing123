import{d as v,c as x,r as s,a as n,e as a,m as h,z as k,A as w,F as g,f as E,b as A,i as b,B,o,h as D,u as F}from"./index.03c1f994.js";import{s as P}from"./others.f78e1ae1.js";import{_ as S}from"./playlist-item.7b13e819.js";const C={class:"search-wrapper pt-24 h-full relative flex flex-col"},$={class:"absolute top-0 right-0 left-0 pt-4 px-2"},G=a("h2",{class:"dark:text-white text-xl font-bold"},"\u641C\u7D22",-1),I={class:"overflow-y-auto mt-4 flex-1"},T={key:0,class:"w-full text-center text-sm text-gray-400 my-4"},V=a("span",null,"\u52A0\u8F7D\u4E2D...",-1),Z=[V],K={key:1,class:"w-full text-center text-sm text-gray-400 my-4"},L=v({__name:"index",setup(M){const y=b(),_=x(()=>y.state.player),r=s(""),u=s(0),d=s(!1),c=s(!1),l=s([]);s([]);async function f(p=!1){try{c.value=!0,p||(u.value=0,l.value=[]);const{data:{result:e}}=await P({keywords:r.value,limit:20,offset:u.value,type:1});if(e.songs){const t=e.songs.map(m=>m.id).join(","),{data:i}=await B(t);l.value=l.value.concat(i.songs),u.value+=20,d.value=e.hasMore}}catch(e){console.log(e)}finally{c.value=!1}}return(p,e)=>(o(),n("div",C,[a("header",$,[G,h(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),type:"text",name:"keyword",id:"keyword",class:"mt-3 w-full text-base text-gray-600 placeholder-gray-600 font-semibold py-2 px-4 rounded outline-none",placeholder:"\u5173\u952E\u5B57",onKeypress:e[1]||(e[1]=w(t=>f(),["enter"]))},null,544),[[k,r.value]])]),a("ul",I,[(o(!0),n(g,null,E(l.value,(t,i)=>(o(),D(S,{class:"mb-1",key:i,track:t,onOnPlay:m=>F(_)._playTrack(0,t)},null,8,["track","onOnPlay"]))),128)),c.value?(o(),n("li",T,Z)):d.value?(o(),n("li",K,[a("span",{onClick:e[2]||(e[2]=t=>f(!0))},"\u52A0\u8F7D\u66F4\u591A")])):A("",!0)])]))}});export{L as default};
